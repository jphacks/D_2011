openapi: 3.0.0
info:
  title: Aika API
  version: '1.3'
  description: Zoom会議支援サービス「aika」用API
servers:
  - url: 'http://localhost:3000'
paths:
  /api/meeting:
    post:
      summary: ミーティング作成
      operationId: post-api-meeting
      description: ''
      tags:
        - meeting
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  ok:
                    type: boolean
                  code:
                    type: number
                  data:
                    type: object
                    required:
                      - agendas
                      - url
                      - id
                    properties:
                      url:
                        type: string
                        minLength: 1
                      id:
                        type: string
                        minLength: 1
                required:
                  - ok
                  - code
                  - data
              examples:
                例:
                  value:
                    ok: true
                    code: 200
                    data:
                      url: 'https://aika.lit-kansai-mentors.com/agenda/7e96e3956d65c49ed9dfec02b721e301'
                      id: 7e96e3956d65c49ed9dfec02b721e301
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                title:
                  type: string
                  minLength: 1
                start_time:
                  type: string
                  minLength: 1
                zoom_id:
                  type: string
                  minLength: 1
                zoom_pass:
                  type: string
                  minLength: 1
                email:
                  type: string
                  minLength: 1
                agendas:
                  type: array
                  uniqueItems: true
                  minItems: 1
                  items:
                    type: object
                    properties:
                      title:
                        type: string
                        minLength: 1
                      duration:
                        type: number
                    required:
                      - title
                      - duration
              required:
                - title
                - start_time
                - zoom_id
                - zoom_pass
                - agendas
                - email
            examples:
              例:
                value:
                  title: taguchike meeting
                  start_time: '1605020400'
                  zoom_id: '5534291784'
                  zoom_pass: '3k0wsA'
                  email: 'taguchike@taguchike.com'
                  agendas:
                    - title: 自己紹介
                      duration: 120
                    - title: 概要
                      duration: 300

  /api/meeting/:id/join:
    post:
      summary: AikaをZoomに招待
      operationId: post-api-meeting-join
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる
      tags:
        - meeting
      responses:
        '200':
          description: OK
        '500':
          description: Zoom接続エラー
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  ok:
                    type: boolean
                  code:
                    type: number
                  error:
                    type: string
                    minLength: 1
                required:
                  - ok
                  - code
                  - error
              examples:
                例:
                  value:
                    ok: false
                    code: 500
                    error: zoom connection error

  /api/meeting/:id/start:
    post:
      summary: ミーティング開始
      operationId: post-api-meeting-start
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる
      tags:
        - meeting
      responses:
        '200':
          description: OK

  /api/meeting/:id/finish:
    post:
      summary: ミーティング終了（Aika退出）
      operationId: post-api-meeting-finish
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる
      tags:
        - meeting
      responses:
        '200':
          description: OK

  /api/meeting/:id/mute_all:
    post:
      summary: 全員ミュート&アンミュート通知
      operationId: post-api-meeting-mute_all
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる
      tags:
        - meeting
      responses:
        '200':
          description: OK

  /api/meeting/:id/agenda/list.png:
    get:
      summary: アジェンダ画像取得
      operationId: get-api-meeting-img
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる。アジェンダ一覧の画像が返される。
      tags:
        - agenda
      responses:
        '200':
            description: アジェンダ一覧の画像（1枚）

  /api/meeting/:id/ogp.png:
    get:
      summary: OGP画像取得
      operationId: get-api-ogp-img
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる。OGP画像が返される。
      tags:
        - meeting
      responses:
        '200':
            description: OGP画像（1枚）

  /api/meeting/:id/agenda/next:
    post:
      summary: 議題変更
      operationId: post-api-meeting-agenda-next
      description: idには、ミーティング作成時にサーバーから返されるIDを入れる
      tags:
        - agenda
      responses:
        '200':
            description: OK
  /api/meeting/find:
    post:
      summary: Emailから該当するミーティングの検索
      operationId: post-api-meeting-agenda-find
      description: ''
      tags:
        - meeting
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: ''
                type: object
                properties:
                  ok:
                    type: boolean
                  code:
                    type: number
                  data:
                    type: object
                    required:
                      - url
                      - id
                    properties:
                      id:
                        type: string
                        minLength: 1
                required:
                  - ok
                  - code
                  - data
              examples:
                例:
                  value:
                    ok: true
                    code: 200
                    data:
                      id: 7e96e3956d65c49ed9dfec02b721e301
      requestBody:
        content:
          application/json:
            schema:
              description: ''
              type: object
              properties:
                email:
                  type: string
                  minLength: 1
              required:
                - email
            examples:
              例:
                value:
                  email: taguchike@taguchike.com

/api/meeting/:id/agenda/next:
      get:
        summary: 次の議題を返す
        operationId: get-api-agenda-next
        description: idには、ミーティング作成時にサーバーから返されるIDを入れる。
        tags:
          - meeting
        responses:
          '200':
              description: ''
components:
  schemas: {}
  securitySchemes: {}
